<!-- Generated by SpecStory -->

# Clean up file layout and organization (2025-06-08 01:01:35)

_**User**_

can we look at cleaning up the file layout, making sure the files are in the correct projects in the correct directories

---

_**Assistant**_



---

I'll help you clean up the file layout and ensure files are properly organized. Let me start by examining the current structure and understanding what belongs where.

---

Read file: BlastMerge.sln

---

<details>
            <summary>Listed directory BlastMerge.Core ‚Ä¢ **7** results</summary>
        
| Name |
|-------|
| üìÅ `Models` |
| üìÅ `obj` |
| üìÅ `Services` |
| üìÅ `Constants` |
| üìÑ `BlastMerge.Core.csproj` |
| üìÅ `Contracts` |
| üìÅ `bin` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp ‚Ä¢ **23** results</summary>
        
| Name |
|-------|
| üìÑ `ConsoleApplicationService.cs` |
| üìÅ `Contracts` |
| üìÑ `MenuNames.cs` |
| üìÅ `obj` |
| üìÑ `CommandLineHandler.cs` |
| üìÑ `Program.cs` |
| üìÑ `AppDataHistoryInput.cs` |
| üìÑ `BlastMerge.ConsoleApp.csproj` |
| üìÑ `HelpChoice.cs` |
| üìÑ `SettingsChoice.cs` |
| üìÅ `Services` |
| üìÑ `MenuChoice.cs` |
| üìÑ `BatchActionChoice.cs` |
| üìÑ `BatchOperationChoice.cs` |
| üìÑ `InputState.cs` |
| üìÑ `BatchActionResult.cs` |
| üìÑ `BatchPatternResult.cs` |
| üìÑ `ProcessFileActionChoice.cs` |
| üìÑ `CompareChoice.cs` |
| üìÑ `HelpMenuChoice.cs` |
| üìÑ `ICommandLineHandler.cs` |
| üìÑ `CommandLineOptions.cs` |
| üìÅ `bin` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Test ‚Ä¢ **17** results</summary>
        
| Name |
|-------|
| üìÑ `MockFileSystemTests.cs` |
| üìÅ `Adapters` |
| üìÑ `PerformanceTests.cs` |
| üìÑ `FileDifferPathTests.cs` |
| üìÑ `RecursiveDiffTests.cs` |
| üìÅ `obj` |
| üìÑ `FileDisplayServiceTests.cs` |
| üìÑ `FileFinderTests.cs` |
| üìÑ `EdgeCaseTests.cs` |
| üìÑ `DiffPlexDifferTests.cs` |
| üìÑ `FileDifferGroupingTests.cs` |
| üìÑ `FileDifferDiffTests.cs` |
| üìÑ `TestHelper.cs` |
| üìÑ `MockFileSystemTestBase.cs` |
| üìÑ `FileHasherTests.cs` |
| üìÅ `bin` |
| üìÑ `BlastMerge.Test.csproj` |

</details>

---

Let me explore the deeper directory structures to get a full picture:

---

<details>
            <summary>Listed directory BlastMerge.Core/Models ‚Ä¢ **29** results</summary>
        
| Name |
|-------|
| üìÑ `ColorCodePair.cs` |
| üìÑ `DiffBlockStatistics.cs` |
| üìÑ `FileOperationResult.cs` |
| üìÑ `DiffStatistics.cs` |
| üìÑ `BlockContext.cs` |
| üìÑ `BlastMergeAppData.cs` |
| üìÑ `ApplicationSettings.cs` |
| üìÑ `RecentBatchInfo.cs` |
| üìÑ `BatchConfiguration.cs` |
| üìÑ `PatternResult.cs` |
| üìÑ `MergeCompletionResult.cs` |
| üìÑ `MergeOperationSummary.cs` |
| üìÑ `ResolutionItem.cs` |
| üìÑ `DiffBlock.cs` |
| üìÑ `BatchResult.cs` |
| üìÑ `BlockType.cs` |
| üìÑ `BlockChoice.cs` |
| üìÑ `LineDifference.cs` |
| üìÑ `LineDifferenceType.cs` |
| üìÑ `DiffColor.cs` |
| üìÑ `ColoredDiffLine.cs` |
| üìÑ `DirectoryComparisonResult.cs` |
| üìÑ `FileSimilarity.cs` |
| üìÑ `MergeConflict.cs` |
| üìÑ `MergeResult.cs` |
| üìÑ `MergeSessionStatus.cs` |
| üìÑ `FileGroup.cs` |
| üìÑ `ProcessingRequest.cs` |
| üìÑ `BatchRequest.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Core/Services ‚Ä¢ **14** results</summary>
        
| Name |
|-------|
| üìÑ `FileDiffer.cs` |
| üìÑ `BlockMerger.cs` |
| üìÑ `DiffPlexHelper.cs` |
| üìÑ `AppDataBatchManager.cs` |
| üìÑ `ApplicationService.cs` |
| üìÑ `DiffPlexDiffer.cs` |
| üìÑ `FileFinder.cs` |
| üìÑ `SecureTempFileHelper.cs` |
| üìÑ `CharacterLevelDiffer.cs` |
| üìÑ `WhitespaceVisualizer.cs` |
| üìÑ `BatchProcessor.cs` |
| üìÑ `IterativeMergeOrchestrator.cs` |
| üìÑ `FileHasher.cs` |
| üìÑ `AsyncFileDiffer.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Core/Constants ‚Ä¢ **1** results</summary>
        
| Name |
|-------|
| üìÑ `ProgressMessages.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Core/Contracts ‚Ä¢ **1** results</summary>
        
| Name |
|-------|
| üìÑ `IApplicationService.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Services ‚Ä¢ **9** results</summary>
        
| Name |
|-------|
| üìÑ `SyncOperationsService.cs` |
| üìÑ `FileDisplayService.cs` |
| üìÑ `AsyncApplicationService.cs` |
| üìÑ `MenuDisplayService.cs` |
| üìÑ `ProgressReportingService.cs` |
| üìÑ `UserInteractionService.cs` |
| üìÑ `InteractiveMergeService.cs` |
| üìÅ `MenuHandlers` |
| üìÅ `Common` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Services/MenuHandlers ‚Ä¢ **7** results</summary>
        
| Name |
|-------|
| üìÑ `HelpMenuHandler.cs` |
| üìÑ `SettingsMenuHandler.cs` |
| üìÑ `BatchOperationsMenuHandler.cs` |
| üìÑ `FindFilesMenuHandler.cs` |
| üìÑ `IterativeMergeMenuHandler.cs` |
| üìÑ `CompareFilesMenuHandler.cs` |
| üìÑ `BaseMenuHandler.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Services/Common ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `FileComparisonDisplayService.cs` |
| üìÑ `ComparisonOperationsService.cs` |
| üìÑ `UIHelper.cs` |
| üìÑ `NavigationStack.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Contracts ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `SyncChoice.cs` |
| üìÑ `HelpChoice.cs` |
| üìÑ `SettingsChoice.cs` |
| üìÑ `IMenuHandler.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Test/Adapters ‚Ä¢ **6** results</summary>
        
| Name |
|-------|
| üìÑ `IFileDiffer.cs` |
| üìÑ `IFileHasher.cs` |
| üìÑ `IFileFinder.cs` |
| üìÑ `FileFinderAdapter.cs` |
| üìÑ `FileDifferAdapter.cs` |
| üìÑ `FileHasherAdapter.cs` |

</details>

---

Now let me check what's in the root directory and some key files to understand the purpose and organization better:

---

Read file: README.md

---

Now let me look at some issue patterns I've identified. Let me check if there are any files that might be misplaced:

---

<details>
            <summary>Grep search for "namespace BlastMerge" ‚Ä¢ **0** files</summary>
        
No results found
</details>

---

<details>
            <summary>Grep search for "namespace" ‚Ä¢ **100** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/TestHelper.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/RecursiveDiffTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/PerformanceTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/MockFileSystemTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/MockFileSystemTestBase.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/FileHasherTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/FileFinderTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/FileDisplayServiceTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/FileDifferPathTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/FileDifferGroupingTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/FileDifferDiffTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/EdgeCaseTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/DiffPlexDifferTests.cs` | L4 | `namespace ktsu.BlastMerge.Test;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/Adapters/IFileHasher.cs` | L4 | `namespace ktsu.BlastMerge.Test.Adapters;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/Adapters/IFileFinder.cs` | L4 | `namespace ktsu.BlastMerge.Test.Adapters;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/Adapters/IFileDiffer.cs` | L4 | `namespace ktsu.BlastMerge.Test.Adapters;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/Adapters/FileHasherAdapter.cs` | L4 | `namespace ktsu.BlastMerge.Test.Adapters;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/Adapters/FileFinderAdapter.cs` | L4 | `namespace ktsu.BlastMerge.Test.Adapters;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/Adapters/FileDifferAdapter.cs` | L4 | `namespace ktsu.BlastMerge.Test.Adapters;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/WhitespaceVisualizer.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/SecureTempFileHelper.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/IterativeMergeOrchestrator.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/FileHasher.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/FileFinder.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/FileDiffer.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/DiffPlexHelper.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/DiffPlexDiffer.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/CharacterLevelDiffer.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/BlockMerger.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/BatchProcessor.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/AsyncFileDiffer.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/ApplicationService.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/AppDataBatchManager.cs` | L4 | `namespace ktsu.BlastMerge.Core.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/ResolutionItem.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/RecentBatchInfo.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/ProcessingRequest.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/PatternResult.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/MergeSessionStatus.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/MergeResult.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/MergeOperationSummary.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/MergeConflict.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/MergeCompletionResult.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/LineDifferenceType.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/LineDifference.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/FileSimilarity.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/FileOperationResult.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/FileGroup.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/DirectoryComparisonResult.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/DiffStatistics.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/DiffColor.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/DiffBlockStatistics.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/DiffBlock.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/ColoredDiffLine.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/ColorCodePair.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BlockType.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BlockContext.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BlockChoice.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BlastMergeAppData.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchResult.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchRequest.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchConfiguration.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/ApplicationSettings.cs` | L4 | `namespace ktsu.BlastMerge.Core.Models;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Contracts/IApplicationService.cs` | L4 | `namespace ktsu.BlastMerge.Core.Contracts;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Constants/ProgressMessages.cs` | L4 | `namespace ktsu.BlastMerge.Core.Constants;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/SettingsChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/UserInteractionService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/SyncOperationsService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ProgressReportingService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/FindFilesMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/IterativeMergeMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BaseMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.MenuHandlers;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuDisplayService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/InteractiveMergeService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/FileDisplayService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L6 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Program.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/ProcessFileActionChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/MenuNames.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/MenuChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/FileComparisonDisplayService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.Common;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/UIHelper.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.Common;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/NavigationStack.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.Common;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services.Common;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/InputState.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/ICommandLineHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Contracts;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/HelpMenuChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/HelpChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/ConsoleApplicationService.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/CompareChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/CommandLineOptions.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Contracts/IMenuHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Contracts;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Contracts/SettingsChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Contracts;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Contracts/HelpChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Contracts;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Contracts/SyncChoice.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Contracts;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/CommandLineHandler.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp.Services;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/BatchPatternResult.cs` | L4 | `namespace ktsu.BlastMerge.ConsoleApp;` |

</details>

---

Based on my analysis of the codebase, I can see several organizational issues that need to be addressed. Let me create a comprehensive plan for cleaning up the file layout:

## Current Issues Identified:

1. **Misplaced files in root directories**: Many files in `BlastMerge.ConsoleApp` that should be organized into subdirectories
2. **Inconsistent namespace vs. file location mapping**: Some files have the wrong namespace or are in the wrong physical location
3. **Duplicated contract definitions**: Some choice enums appear in both root and Contracts folders
4. **Mixed concerns**: Some service files are in the wrong directory structure

## File Organization Plan:

### 1. **BlastMerge.ConsoleApp** - Root directory cleanup
**Issues**: Too many files in the root directory, some should be organized better.

**Files to move:**
- Choice enums (`HelpChoice.cs`, `SettingsChoice.cs`, `CompareChoice.cs`, etc.) ‚Üí Should all be in `Models/` or `Contracts/`
- State models (`InputState.cs`, `BatchActionResult.cs`, etc.) ‚Üí Should be in `Models/`
- Command-line specific files ‚Üí Should be in `CLI/` or similar

### 2. **Namespace and physical location alignment**
**Issues**: 
- `ICommandLineHandler.cs` has namespace `ktsu.BlastMerge.ConsoleApp.Contracts` but is in the root
- `ConsoleApplicationService.cs` has namespace `ktsu.BlastMerge.ConsoleApp.Services` but is in the root

### 3. **Duplicate contract definitions**
**Issues**: Some choice enums exist in both root and `Contracts/` folders

Let me implement these fixes:

---

```bash
cd /c/dev/ktsu-dev/BlastMerge && mkdir -p BlastMerge.ConsoleApp/Models BlastMerge.ConsoleApp/CLI
```

```
C:\dev\ktsu-dev\BlastMerge>cd /c/dev/ktsu-dev/BlastMerge && mkdir -p BlastMerge.ConsoleApp/Models BlastMerge.ConsoleApp/CLI
Microsoft Windows [Version 10.0.26100.4061]
(c) Microsoft Corporation. All rights reserved.

C:\dev\ktsu-dev\BlastMerge>cd /c/dev/ktsu-dev/BlastMerge && mkdir -p BlastMerge.ConsoleApp/Models BlastMerge.ConsoleApp/CLI
The system cannot find the path specified.

C:\dev\ktsu-dev\BlastMerge>




















C:\dev\ktsu-dev\BlastMerge>
```

---



---



---

Now let's start organizing the files. First, let me move the choice/model files to the Models directory:

---



---



---



---



---



---



---



---





---



---



---



---



---

Now let's move CLI-related files to the CLI directory:

---



---



---



---



---

Now let's move the service files that are in the root to the Services directory:

---



---

Now I need to update the namespaces in the moved files to reflect their new locations. Let me start with the files moved to Models:

---



---



---



---



---



---



---



---



---



---



---



---



---

Now let's update the CLI files:

---



---



---



---

Now I need to check for duplicate files in the Contracts directory and remove them since we've moved the canonical versions:

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Contracts ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `SyncChoice.cs` |
| üìÑ `HelpChoice.cs` |
| üìÑ `SettingsChoice.cs` |
| üìÑ `IMenuHandler.cs` |

</details>

---

I can see there are duplicate choice files in the Contracts directory. Let me check if they're identical to the ones we moved:

---

Read file: BlastMerge.ConsoleApp/Contracts/HelpChoice.cs

---





---

Read file: BlastMerge.ConsoleApp/Models/HelpChoice.cs

---

These are different versions. Let me check the SettingsChoice as well:

---

Read file: BlastMerge.ConsoleApp/Contracts/SettingsChoice.cs

---

Read file: BlastMerge.ConsoleApp/Models/SettingsChoice.cs

---

These are also different versions. It looks like there are two different implementations. I need to check which one is being used in the codebase. Let me search for references:

---

<details>
            <summary>Grep search for "using.*HelpChoice" ‚Ä¢ **0** files</summary>
        
No results found
</details>

---

<details>
            <summary>Grep search for "HelpChoice\." ‚Ä¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L29 | `["üìñ Application Overview"] = HelpChoice.ApplicationOverview,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L30 | `["üéØ Feature Guide"] = HelpChoice.FeatureGuide,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L31 | `["‚å®Ô∏è Keyboard Shortcuts"] = HelpChoice.KeyboardShortcuts,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L32 | `[GetBackMenuText()] = HelpChoice.BackToMainMenu` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L44 | `case HelpChoice.ApplicationOverview:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L47 | `case HelpChoice.FeatureGuide:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L50 | `case HelpChoice.KeyboardShortcuts:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs` | L53 | `case HelpChoice.BackToMainMenu:` |

</details>

---

Let me check the imports in that file:

---

Read file: BlastMerge.ConsoleApp/Services/MenuHandlers/HelpMenuHandler.cs

---

I can see it's using `ktsu.BlastMerge.ConsoleApp.Contracts` namespace, which means it's using the version in the Contracts folder. Let me check if there are other references to see which version is the canonical one:

---

<details>
            <summary>Grep search for "SettingsChoice\." ‚Ä¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L29 | `[MenuNames.SettingsDisplay.ViewConfigurationPaths] = SettingsChoice.ViewConfigurationPaths,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L30 | `[MenuNames.SettingsDisplay.ClearInputHistory] = SettingsChoice.ClearInputHistory,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L31 | `[MenuNames.SettingsDisplay.ViewStatistics] = SettingsChoice.ViewStatistics,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L32 | `[GetBackMenuText()] = SettingsChoice.BackToMainMenu` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L44 | `case SettingsChoice.ViewConfigurationPaths:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L47 | `case SettingsChoice.ClearInputHistory:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L50 | `case SettingsChoice.ViewStatistics:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L53 | `case SettingsChoice.BackToMainMenu:` |

</details>

---

Read file: BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs

---

I can see that both menu handlers are using the Contracts namespace. This means the versions in the Contracts folder are the canonical ones, and the ones I moved to Models are duplicates. Let me remove the duplicates from Models and keep the ones in Contracts:

---

Removing duplicate HelpChoice from Models since the canonical version is in Contracts

---

Removing duplicate SettingsChoice from Models since the canonical version is in Contracts

---

Now I need to update all the references to the moved files. Let me search for imports that need to be updated:

---

<details>
            <summary>Grep search for "using.*BlastMerge\.ConsoleApp;" ‚Ä¢ **0** files</summary>
        
No results found
</details>

---

<details>
            <summary>Grep search for "MenuChoice" ‚Ä¢ **3** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L32 | `private static readonly Dictionary<string, MenuChoice> MainMenuChoices = new()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L34 | `[MenuNames.Display.FindFiles] = MenuChoice.FindFiles,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L35 | `[MenuNames.Display.CompareFiles] = MenuChoice.CompareFiles,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L36 | `[MenuNames.Display.IterativeMerge] = MenuChoice.IterativeMerge,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L37 | `[MenuNames.Display.BatchOperations] = MenuChoice.BatchOperations,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L38 | `[MenuNames.Display.RunRecentBatch] = MenuChoice.RunRecentBatch,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L39 | `[MenuNames.Display.Settings] = MenuChoice.Settings,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L40 | `[MenuNames.Display.Help] = MenuChoice.Help,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L41 | `[MenuNames.Display.Exit] = MenuChoice.Exit` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L529 | `MenuChoice choice = ShowMainMenu();` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L531 | `if (choice == MenuChoice.Exit)` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L536 | `ExecuteMenuChoice(choice);` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L577 | `private static MenuChoice ShowMainMenu()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L580 | `Dictionary<string, MenuChoice> dynamicMenuChoices = new(MainMenuChoices);` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L587 | `dynamicMenuChoices.Remove(MenuNames.Display.RunRecentBatch);` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L588 | `dynamicMenuChoices[$"{MenuNames.Display.RunRecentBatch} ({recentBatch})"] = MenuChoice.RunRecentBatch;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L596 | `.AddChoices(dynamicMenuChoices.Keys));` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L598 | `return dynamicMenuChoices.TryGetValue(selection, out MenuChoice command) ? command : MenuChoice.Help;` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L605 | `private void ExecuteMenuChoice(MenuChoice choice)` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L608 | `ExecuteSpecificMenuChoice(choice);` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L624 | `private void ExecuteSpecificMenuChoice(MenuChoice choice)` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L628 | `case MenuChoice.FindFiles:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L631 | `case MenuChoice.IterativeMerge:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L634 | `case MenuChoice.CompareFiles:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L637 | `case MenuChoice.BatchOperations:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L640 | `case MenuChoice.RunRecentBatch:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L643 | `case MenuChoice.Settings:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L646 | `case MenuChoice.Help:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L647 | `case MenuChoice.Exit:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/MenuChoice.cs` | L9 | `public enum MenuChoice` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/HelpMenuChoice.cs` | L9 | `public enum HelpMenuChoice` |

</details>

---

I need to add the proper using statement to ConsoleApplicationService.cs:

---

Read file: BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs

---

I need to add the import for the Models namespace:

---



---

Now let me check for other files that might need the import updated:

---

<details>
            <summary>Grep search for "ProcessFileActionChoice" ‚Ä¢ **3** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L104 | `Dictionary<string, ProcessFileActionChoice> processFileActionChoices = new()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L106 | `[MenuNames.Actions.ViewDetailedFileList] = ProcessFileActionChoice.ViewDetailedFileList,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L107 | `[MenuNames.Actions.ShowDifferences] = ProcessFileActionChoice.ShowDifferences,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L108 | `[MenuNames.Actions.RunIterativeMergeOnDuplicates] = ProcessFileActionChoice.RunIterativeMergeOnDuplicates,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L109 | `[MenuNames.Actions.SyncFiles] = ProcessFileActionChoice.SyncFiles,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L110 | `[MenuNames.Actions.ReturnToMainMenu] = ProcessFileActionChoice.ReturnToMainMenu` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L116 | `.AddChoices(processFileActionChoices.Keys));` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L118 | `if (processFileActionChoices.TryGetValue(selection, out ProcessFileActionChoice choice))` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L129 | `private static void ExecuteFileAction(ProcessFileActionChoice choice, IReadOnlyDictionary<string, IReadOnlyCollection<string>> fileGroups)` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L133 | `case ProcessFileActionChoice.ViewDetailedFileList:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L136 | `case ProcessFileActionChoice.ShowDifferences:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L139 | `case ProcessFileActionChoice.RunIterativeMergeOnDuplicates:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L142 | `case ProcessFileActionChoice.SyncFiles:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L145 | `case ProcessFileActionChoice.ReturnToMainMenu:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/ProcessFileActionChoice.cs` | L9 | `public enum ProcessFileActionChoice` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L104 | `Dictionary<string, ProcessFileActionChoice> processFileActionChoices = new()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L106 | `[MenuNames.Actions.ViewDetailedFileList] = ProcessFileActionChoice.ViewDetailedFileList,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L107 | `[MenuNames.Actions.ShowDifferences] = ProcessFileActionChoice.ShowDifferences,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L108 | `[MenuNames.Actions.RunIterativeMergeOnDuplicates] = ProcessFileActionChoice.RunIterativeMergeOnDuplicates,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L109 | `[MenuNames.Actions.SyncFiles] = ProcessFileActionChoice.SyncFiles,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L110 | `[MenuNames.Actions.ReturnToMainMenu] = ProcessFileActionChoice.ReturnToMainMenu` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L116 | `.AddChoices(processFileActionChoices.Keys));` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L118 | `if (processFileActionChoices.TryGetValue(selection, out ProcessFileActionChoice choice))` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L129 | `private static void ExecuteFileAction(ProcessFileActionChoice choice, IReadOnlyDictionary<string, IReadOnlyCollection<string>> fileGroups)` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L133 | `case ProcessFileActionChoice.ViewDetailedFileList:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L136 | `case ProcessFileActionChoice.ShowDifferences:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L139 | `case ProcessFileActionChoice.RunIterativeMergeOnDuplicates:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L142 | `case ProcessFileActionChoice.SyncFiles:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L145 | `case ProcessFileActionChoice.ReturnToMainMenu:` |

</details>

---

Good, that's already covered by the import I added. Let me check for other references:

---

<details>
            <summary>Grep search for "BatchActionChoice" ‚Ä¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/BatchActionChoice.cs` | L9 | `public enum BatchActionChoice` |

</details>

---

<details>
            <summary>Grep search for "BatchOperationChoice" ‚Ä¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L52 | `Dictionary<string, BatchOperationChoice> batchOperationChoices = new()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L54 | `[MenuNames.BatchOperationsDisplay.RunBatchConfiguration] = BatchOperationChoice.RunBatchConfiguration,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L55 | `[MenuNames.BatchOperationsDisplay.ManageBatchConfigurations] = BatchOperationChoice.ManageBatchConfigurations,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L56 | `[GetBackMenuText()] = BatchOperationChoice.BackToMainMenu` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L62 | `.AddChoices(batchOperationChoices.Keys));` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L64 | `if (batchOperationChoices.TryGetValue(selection, out BatchOperationChoice choice))` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L68 | `case BatchOperationChoice.ManageBatchConfigurations:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L71 | `case BatchOperationChoice.RunBatchConfiguration:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L74 | `case BatchOperationChoice.BackToMainMenu:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/BatchOperationChoice.cs` | L9 | `public enum BatchOperationChoice` |

</details>

---

I need to add the import to BatchOperationsMenuHandler:

---

Read file: BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs

---

I need to add the import for the Models namespace:

---



---

Now let me check for other references that might need updating:

---

<details>
            <summary>Grep search for "CompareChoice" ‚Ä¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L28 | `Dictionary<string, CompareChoice> compareChoices = new()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L30 | `[MenuNames.CompareFilesDisplay.CompareFilesInDirectory] = CompareChoice.CompareFilesInDirectory,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L31 | `[MenuNames.CompareFilesDisplay.CompareTwoDirectories] = CompareChoice.CompareTwoDirectories,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L32 | `[MenuNames.CompareFilesDisplay.CompareTwoSpecificFiles] = CompareChoice.CompareTwoSpecificFiles,` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L33 | `[GetBackMenuText()] = CompareChoice.BackToMainMenu` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L39 | `.AddChoices(compareChoices.Keys));` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L41 | `if (compareChoices.TryGetValue(selection, out CompareChoice choice))` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L45 | `case CompareChoice.CompareFilesInDirectory:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L48 | `case CompareChoice.CompareTwoDirectories:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L51 | `case CompareChoice.CompareTwoSpecificFiles:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L54 | `case CompareChoice.BackToMainMenu:` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/CompareChoice.cs` | L9 | `public enum CompareChoice` |

</details>

---

Read file: BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs

---

I need to add the import for the Models namespace:

---



---

Now let me check for references to the CLI namespace:

---

<details>
            <summary>Grep search for "CommandLineHandler" ‚Ä¢ **3** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Program.cs` | L30 | `CommandLineHandler commandLineHandler = new(applicationService);` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Program.cs` | L33 | `return commandLineHandler.ProcessCommandLineArguments(args);` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/CLI/ICommandLineHandler.cs` | L9 | `public interface ICommandLineHandler` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/CLI/CommandLineHandler.cs` | L16 | `public class CommandLineHandler(Core.Contracts.IApplicationService applicationService) : ICommandLineHandler` |

</details>

---

Read file: BlastMerge.ConsoleApp/Program.cs

---

I need to add the import for the CLI namespace:

---



---

Now let me check for references to AppDataHistoryInput:

---

<details>
            <summary>Grep search for "AppDataHistoryInput" ‚Ä¢ **11** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L88 | `AppDataHistoryInput.GetAllHistory().Count > 0 ? "[green]Has Data[/]" : "[yellow]Empty[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L117 | `AppDataHistoryInput.ClearAllHistory();` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/IterativeMergeMenuHandler.cs` | L29 | `directory = AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/IterativeMergeMenuHandler.cs` | L36 | `fileName = AppDataHistoryInput.AskWithHistory("[cyan]Enter filename pattern[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/FindFilesMenuHandler.cs` | L31 | `directory = AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/FindFilesMenuHandler.cs` | L38 | `fileName = AppDataHistoryInput.AskWithHistory("[cyan]Enter filename pattern[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L75 | `directory = AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L82 | `fileName = AppDataHistoryInput.AskWithHistory("[cyan]Enter filename pattern[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L237 | `string batchName = AppDataHistoryInput.AskWithHistory("[cyan]Enter batch name[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L264 | `string description = AppDataHistoryInput.AskWithHistory("[cyan]Enter description (optional)[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L295 | `string pattern = AppDataHistoryInput.AskWithHistory($"[cyan]Pattern {patterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L322 | `string searchPath = AppDataHistoryInput.AskWithHistory($"[cyan]Search Path {searchPaths.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L350 | `string exclusionPattern = AppDataHistoryInput.AskWithHistory($"[cyan]Exclusion Pattern {exclusionPatterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L480 | `directory = AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L627 | `string description = AppDataHistoryInput.AskWithHistory($"[cyan]Enter description[/] (current: {batch.Description ?? ""})", batch.Description ?? "");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L670 | `string pattern = AppDataHistoryInput.AskWithHistory($"[cyan]Pattern {patterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L721 | `string searchPath = AppDataHistoryInput.AskWithHistory($"[cyan]Search Path {searchPaths.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L766 | `string exclusionPattern = AppDataHistoryInput.AskWithHistory($"[cyan]Exclusion Pattern {exclusionPatterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L844 | `string newName = AppDataHistoryInput.AskWithHistory($"[cyan]Enter new name for duplicate[/] (original: {sourceBatch.Name})");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L948 | `string exportPath = AppDataHistoryInput.AskWithHistory($"[cyan]Enter export file path[/] (default: {defaultFileName})");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L987 | `string importPath = AppDataHistoryInput.AskWithHistory("[cyan]Enter import file path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L748 | `return AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs` | L34 | `string dir1 = AppDataHistoryInput.AskWithHistory("[cyan]Enter the first directory path:[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs` | L47 | `string dir2 = AppDataHistoryInput.AskWithHistory("[cyan]Enter the second directory path:[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs` | L60 | `string pattern = AppDataHistoryInput.AskWithHistory("[cyan]Enter file pattern (e.g., *.txt, *.cs):[/]", "*.*");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs` | L75 | `string file1 = AppDataHistoryInput.AskWithHistory("[cyan]Enter the first file path:[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs` | L88 | `string file2 = AppDataHistoryInput.AskWithHistory("[cyan]Enter the second file path:[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L15 | `public static class AppDataHistoryInput` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L748 | `return AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L237 | `string batchName = AppDataHistoryInput.AskWithHistory("[cyan]Enter batch name[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L264 | `string description = AppDataHistoryInput.AskWithHistory("[cyan]Enter description (optional)[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L295 | `string pattern = AppDataHistoryInput.AskWithHistory($"[cyan]Pattern {patterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L322 | `string searchPath = AppDataHistoryInput.AskWithHistory($"[cyan]Search Path {searchPaths.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L350 | `string exclusionPattern = AppDataHistoryInput.AskWithHistory($"[cyan]Exclusion Pattern {exclusionPatterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L480 | `directory = AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L627 | `string description = AppDataHistoryInput.AskWithHistory($"[cyan]Enter description[/] (current: {batch.Description ?? ""})", batch.Description ?? "");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L670 | `string pattern = AppDataHistoryInput.AskWithHistory($"[cyan]Pattern {patterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L721 | `string searchPath = AppDataHistoryInput.AskWithHistory($"[cyan]Search Path {searchPaths.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L766 | `string exclusionPattern = AppDataHistoryInput.AskWithHistory($"[cyan]Exclusion Pattern {exclusionPatterns.Count + 1}[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L844 | `string newName = AppDataHistoryInput.AskWithHistory($"[cyan]Enter new name for duplicate[/] (original: {sourceBatch.Name})");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L948 | `string exportPath = AppDataHistoryInput.AskWithHistory($"[cyan]Enter export file path[/] (default: {defaultFileName})");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L987 | `string importPath = AppDataHistoryInput.AskWithHistory("[cyan]Enter import file path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L75 | `directory = AppDataHistoryInput.AskWithHistory("[cyan]Enter directory path[/]");` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.ConsoleApp/Services/MenuHandlers/CompareFilesMenuHandler.cs` | L82 | `fileName = AppDataHistoryInput.AskWithHistory("[cyan]Enter filename pattern[/]");` |

</details>

---



I need to add the Models import to all these files. Let me start with the ones that don't already have it:

---



---



---

Let me check the current imports in that file:

---

Read file: BlastMerge.ConsoleApp/Services/MenuHandlers/IterativeMergeMenuHandler.cs

---



---

Read file: BlastMerge.ConsoleApp/Services/MenuHandlers/FindFilesMenuHandler.cs

---



---

Read file: BlastMerge.ConsoleApp/Services/Common/ComparisonOperationsService.cs

---



---

Now let me check if there are any other references that need updating. Let me also check for any references to the old deleted files:

---

```bash
cd /c/dev/ktsu-dev/BlastMerge && dotnet build
```

```
C:\dev\ktsu-dev\BlastMerge>cd /c/dev/ktsu-dev/BlastMerge && dotnet build
C:\dev\ktsu-dev\BlastMerge>
```

---

```bash
dotnet build
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet build

  C:\dev\ktsu-dev\BlastMerge\BlastMerge.sln                                                              Restore (0.0s)
                                                                                                                 (0.1s)
  BlastMerge.Core succeeded (1.6s) ‚Üí BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll
  BlastMerge.ConsoleApp failed with 1 error(s) (0.9s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.ConsoleApp\CLI\CommandLineHandler.cs(11,1): error IDE0005: Using directive is unnecessary
. (https://learn.microsoft.com/dotnet/fundamentals/code-analysis/style-rules/ide0005)

Build failed with 1 error(s) in 4.9s

C:\dev\ktsu-dev\BlastMerge>
```

---

There's an unnecessary using directive. Let me check and fix it:

---

Read file: BlastMerge.ConsoleApp/CLI/CommandLineHandler.cs

---

I'll help you clean up the file layout and ensure files are in the correct projects and directories. Let me start by examining the current structure and identifying any organizational issues.

---

<details>
            <summary>Listed current directory ‚Ä¢ **37** results</summary>
        
| Name |
|-------|
| üìÅ `.git` |
| üìÅ `BlastMerge.ConsoleApp` |
| üìÑ `.editorconfig` |
| üìÑ `Directory.Packages.props` |
| üìÑ `README.md` |
| üìÑ `TAGS.md` |
| üìÑ `DESCRIPTION.md` |
| üìÑ `COPYRIGHT.md` |
| üìÑ `AUTHORS.md` |
| üìÅ `TestResults` |
| üìÅ `BlastMerge.Core` |
| üìÑ `.gitignore` |
| üìÅ `BlastMerge.Test` |
| üìÑ `.runsettings` |
| üìÑ `CHANGELOG.md` |
| üìÅ `docs` |
| üìÅ `scripts` |
| üìÅ `.sonarlint` |
| üìÅ `.vscode` |
| üìÑ `VERSION.md` |
| üìÑ `global.json` |
| üìÅ `winget` |
| üìÑ `PROJECT_URL.url` |
| üìÑ `LICENSE.md` |
| üìÅ `.vs` |
| üìÅ `obj` |
| üìÅ `bin` |
| üìÑ `BlastMerge.sln` |
| üìÅ `.specstory` |
| üìÑ `.cursorignore` |
| üìÅ `.cursor` |
| üìÑ `.cursorindexingignore` |
| üìÑ `AUTHORS.url` |
| üìÅ `.github` |
| üìÑ `.mailmap` |
| üìÑ `.gitattributes` |
| üìÑ `icon.png` |

</details>

---

Now let me examine the solution file to understand the project structure:

---

Read file: BlastMerge.sln

---

Good! I can see there are three projects:
1. BlastMerge.Core - Core library
2. BlastMerge.ConsoleApp - Console application
3. BlastMerge.Test - Test project

Let me examine each project's structure to understand the current organization:

---

<details>
            <summary>Listed directory BlastMerge.Core ‚Ä¢ **7** results</summary>
        
| Name |
|-------|
| üìÅ `Models` |
| üìÅ `obj` |
| üìÅ `Services` |
| üìÅ `Constants` |
| üìÑ `BlastMerge.Core.csproj` |
| üìÅ `Contracts` |
| üìÅ `bin` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp ‚Ä¢ **9** results</summary>
        
| Name |
|-------|
| üìÑ `Program.cs` |
| üìÅ `Models` |
| üìÅ `Services` |
| üìÅ `CLI` |
| üìÅ `Contracts` |
| üìÑ `MenuNames.cs` |
| üìÅ `obj` |
| üìÑ `BlastMerge.ConsoleApp.csproj` |
| üìÅ `bin` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Test ‚Ä¢ **17** results</summary>
        
| Name |
|-------|
| üìÑ `MockFileSystemTests.cs` |
| üìÅ `Adapters` |
| üìÑ `PerformanceTests.cs` |
| üìÑ `FileDifferPathTests.cs` |
| üìÑ `RecursiveDiffTests.cs` |
| üìÅ `obj` |
| üìÑ `FileDisplayServiceTests.cs` |
| üìÑ `FileFinderTests.cs` |
| üìÑ `EdgeCaseTests.cs` |
| üìÑ `DiffPlexDifferTests.cs` |
| üìÑ `FileDifferGroupingTests.cs` |
| üìÑ `FileDifferDiffTests.cs` |
| üìÑ `TestHelper.cs` |
| üìÑ `MockFileSystemTestBase.cs` |
| üìÑ `FileHasherTests.cs` |
| üìÅ `bin` |
| üìÑ `BlastMerge.Test.csproj` |

</details>

---

Now let me look at the detailed structure of each project to identify any organizational issues:

---

<details>
            <summary>Listed directory BlastMerge.Core/Models ‚Ä¢ **29** results</summary>
        
| Name |
|-------|
| üìÑ `ColorCodePair.cs` |
| üìÑ `DiffBlockStatistics.cs` |
| üìÑ `FileOperationResult.cs` |
| üìÑ `DiffStatistics.cs` |
| üìÑ `BlockContext.cs` |
| üìÑ `BlastMergeAppData.cs` |
| üìÑ `ApplicationSettings.cs` |
| üìÑ `RecentBatchInfo.cs` |
| üìÑ `BatchConfiguration.cs` |
| üìÑ `PatternResult.cs` |
| üìÑ `MergeCompletionResult.cs` |
| üìÑ `MergeOperationSummary.cs` |
| üìÑ `ResolutionItem.cs` |
| üìÑ `DiffBlock.cs` |
| üìÑ `BatchResult.cs` |
| üìÑ `BlockType.cs` |
| üìÑ `BlockChoice.cs` |
| üìÑ `LineDifference.cs` |
| üìÑ `LineDifferenceType.cs` |
| üìÑ `DiffColor.cs` |
| üìÑ `ColoredDiffLine.cs` |
| üìÑ `DirectoryComparisonResult.cs` |
| üìÑ `FileSimilarity.cs` |
| üìÑ `MergeConflict.cs` |
| üìÑ `MergeResult.cs` |
| üìÑ `MergeSessionStatus.cs` |
| üìÑ `FileGroup.cs` |
| üìÑ `ProcessingRequest.cs` |
| üìÑ `BatchRequest.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Core/Services ‚Ä¢ **14** results</summary>
        
| Name |
|-------|
| üìÑ `FileDiffer.cs` |
| üìÑ `BlockMerger.cs` |
| üìÑ `DiffPlexHelper.cs` |
| üìÑ `AppDataBatchManager.cs` |
| üìÑ `ApplicationService.cs` |
| üìÑ `DiffPlexDiffer.cs` |
| üìÑ `FileFinder.cs` |
| üìÑ `SecureTempFileHelper.cs` |
| üìÑ `CharacterLevelDiffer.cs` |
| üìÑ `WhitespaceVisualizer.cs` |
| üìÑ `BatchProcessor.cs` |
| üìÑ `IterativeMergeOrchestrator.cs` |
| üìÑ `FileHasher.cs` |
| üìÑ `AsyncFileDiffer.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Core/Contracts ‚Ä¢ **1** results</summary>
        
| Name |
|-------|
| üìÑ `IApplicationService.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.Core/Constants ‚Ä¢ **1** results</summary>
        
| Name |
|-------|
| üìÑ `ProgressMessages.cs` |

</details>

---

Now let me examine the ConsoleApp project in detail:

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Models ‚Ä¢ **10** results</summary>
        
| Name |
|-------|
| üìÑ `AppDataHistoryInput.cs` |
| üìÑ `BatchPatternResult.cs` |
| üìÑ `BatchActionResult.cs` |
| üìÑ `InputState.cs` |
| üìÑ `ProcessFileActionChoice.cs` |
| üìÑ `BatchOperationChoice.cs` |
| üìÑ `BatchActionChoice.cs` |
| üìÑ `HelpMenuChoice.cs` |
| üìÑ `CompareChoice.cs` |
| üìÑ `MenuChoice.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Services ‚Ä¢ **10** results</summary>
        
| Name |
|-------|
| üìÑ `ConsoleApplicationService.cs` |
| üìÑ `SyncOperationsService.cs` |
| üìÑ `FileDisplayService.cs` |
| üìÑ `AsyncApplicationService.cs` |
| üìÑ `MenuDisplayService.cs` |
| üìÑ `ProgressReportingService.cs` |
| üìÑ `UserInteractionService.cs` |
| üìÑ `InteractiveMergeService.cs` |
| üìÅ `MenuHandlers` |
| üìÅ `Common` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Services/MenuHandlers ‚Ä¢ **7** results</summary>
        
| Name |
|-------|
| üìÑ `FindFilesMenuHandler.cs` |
| üìÑ `IterativeMergeMenuHandler.cs` |
| üìÑ `SettingsMenuHandler.cs` |
| üìÑ `CompareFilesMenuHandler.cs` |
| üìÑ `BatchOperationsMenuHandler.cs` |
| üìÑ `HelpMenuHandler.cs` |
| üìÑ `BaseMenuHandler.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Services/Common ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `ComparisonOperationsService.cs` |
| üìÑ `FileComparisonDisplayService.cs` |
| üìÑ `UIHelper.cs` |
| üìÑ `NavigationStack.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/CLI ‚Ä¢ **3** results</summary>
        
| Name |
|-------|
| üìÑ `ICommandLineHandler.cs` |
| üìÑ `CommandLineOptions.cs` |
| üìÑ `CommandLineHandler.cs` |

</details>

---

<details>
            <summary>Listed directory BlastMerge.ConsoleApp/Contracts ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `SyncChoice.cs` |
| üìÑ `HelpChoice.cs` |
| üìÑ `SettingsChoice.cs` |
| üìÑ `IMenuHandler.cs` |

</details>

---





---

_**User**_

continue

---

_**Assistant**_



---

I'll continue with the file layout cleanup. Based on the conversation summary, it looks like we've successfully completed most of the reorganization work, but there was one remaining build error to resolve. Let me check the current build status and address any remaining issues.

---

```bash
dotnet build
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet build

  C:\dev\ktsu-dev\BlastMerge\BlastMerge.sln                                                              Restore (0.0s)
Restore complete (2.5s)
  BlastMerge.ConsoleApp failed with 1 error(s) (8.8s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.ConsoleApp\CLI\CommandLineHandler.cs(11,1): error IDE0005: Using directive is unnecessary
. (https://learn.microsoft.com/dotnet/fundamentals/code-analysis/style-rules/ide0005)

Build failed with 1 error(s) in 12.8s

C:\dev\ktsu-dev\BlastMerge>
```

---

Perfect! There's just one remaining issue - an unnecessary using directive in `CommandLineHandler.cs`. Let me check and fix that:

---

Read file: BlastMerge.ConsoleApp/CLI/CommandLineHandler.cs

---



---

