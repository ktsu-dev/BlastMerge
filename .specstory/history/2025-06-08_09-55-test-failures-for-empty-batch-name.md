<!-- Generated by SpecStory -->

# Test failures for empty batch name (2025-06-08 19:55:34)

_**User**_

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      SaveBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception Syste
      m.ArgumentException.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      GetBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception System
      .ArgumentException.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      DeleteBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception Sys
      tem.ArgumentException.

---

_**Assistant**_



---

I can see that there are failing tests related to empty batch name validation. The tests expect `ArgumentException` to be thrown when empty batch names are provided, but the exceptions aren't being thrown. Let me investigate this issue.

First, let me search for these failing test methods to understand what they're testing:

---

<details>
            <summary>Grep search for "SaveBatch_EmptyBatchName_ThrowsArgumentException" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/AppDataBatchManagerTests.cs` | L230 | `public void SaveBatch_EmptyBatchName_ThrowsArgumentException()` |

</details>

---

<details>
            <summary>Grep search for "GetBatch_EmptyBatchName_ThrowsArgumentException" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/AppDataBatchManagerTests.cs` | L246 | `public void GetBatch_EmptyBatchName_ThrowsArgumentException()` |

</details>

---

<details>
            <summary>Grep search for "DeleteBatch_EmptyBatchName_ThrowsArgumentException" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Test/AppDataBatchManagerTests.cs` | L262 | `public void DeleteBatch_EmptyBatchName_ThrowsArgumentException()` |

</details>

---

Now let me examine the test file to understand what these tests are doing:

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Now I can see the issue. The tests expect `ArgumentException` to be thrown when empty strings are passed to `SaveBatch`, `LoadBatch`, and `DeleteBatch` methods. Let me examine the actual implementation of `AppDataBatchManager` to see why these exceptions aren't being thrown:

---

<details>
            <summary>Searched codebase "AppDataBatchManager SaveBatch LoadBatch DeleteBatch" • **24** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L768-823 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L386-441 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L1068-1133 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L823-883 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L883-944 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L202-271 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L944-1012 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L132-202 |
| `BlastMerge.ConsoleApp/Text/BatchManagementDisplay.cs` | L1-27 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L177-219 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L1-67 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L272-324 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L51-91 |

</details>

---

Now I can see the issue clearly. Looking at the `AppDataBatchManager` implementation, I can see that:

1. For `SaveBatch`: It calls `ArgumentNullException.ThrowIfNull(batch)` but doesn't validate if the batch has an empty name.
2. For `LoadBatch` and `DeleteBatch`: They call `ArgumentNullException.ThrowIfNull(name)` but don't check if the name is an empty string.

The tests expect `ArgumentException` to be thrown when empty strings are passed, but the code only throws `ArgumentNullException` for null values. Let me check what the `BatchConfiguration.IsValid()` method does:

---

<details>
            <summary>Searched codebase "BatchConfiguration IsValid method" • **24** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L120-132 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Core/Models/BatchRequest.cs` | L1-22 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L1-51 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L51-120 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L1-71 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L71-130 |
| `BlastMerge.Core/Services/BatchProcessor.cs` | L49-101 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/BatchProcessor.cs` | L712-756 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L130-195 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L202-271 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L1068-1133 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L823-883 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L177-219 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L386-441 |
| `BlastMerge.ConsoleApp/CLI/CommandLineOptions.cs` | L1-56 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |

</details>

---

Perfect! Now I can see the issue clearly. Looking at the `BatchConfiguration.IsValid()` method, I can see that it checks `!string.IsNullOrWhiteSpace(Name)`, which means that if the `Name` is empty, `IsValid()` returns `false`. However, for the `SaveBatch` method, when `batch.IsValid()` returns `false`, it just returns `false` instead of throwing an `ArgumentException`.

For the `LoadBatch` and `DeleteBatch` methods, they only check for null values but don't validate empty strings.

Now I need to fix the `AppDataBatchManager` class to throw `ArgumentException` when empty strings are passed as expected by the tests:

---

```diff
  	{
  		ArgumentNullException.ThrowIfNull(batch);
+ 
+ 		if (string.IsNullOrWhiteSpace(batch.Name))
+ 		{
+ 			throw new ArgumentException("Batch name cannot be null, empty, or whitespace.", nameof(batch));
+ 		}
  
  		if (!batch.IsValid())
```

```diff
  	{
  		ArgumentNullException.ThrowIfNull(name);
+ 
+ 		if (string.IsNullOrWhiteSpace(name))
+ 		{
+ 			throw new ArgumentException("Name cannot be null, empty, or whitespace.", nameof(name));
+ 		}
  
  		return AppData.BatchConfigurations.TryGetValue(name, out BatchConfiguration? batch) ? batch : null;
```

```diff
  	{
  		ArgumentNullException.ThrowIfNull(name);
+ 
+ 		if (string.IsNullOrWhiteSpace(name))
+ 		{
+ 			throw new ArgumentException("Name cannot be null, empty, or whitespace.", nameof(name));
+ 		}
  
  		try
```

```diff
  	{
  		ArgumentNullException.ThrowIfNull(batchName);
+ 
+ 		if (string.IsNullOrWhiteSpace(batchName))
+ 		{
+ 			throw new ArgumentException("Batch name cannot be null, empty, or whitespace.", nameof(batchName));
+ 		}
  
  		try
```

---

Now let's run the tests to see if our fix resolves the failing tests:

---

```bash
dotnet test BlastMerge.Test/BlastMerge.Test.csproj --filter "SaveBatch_EmptyBatchName_ThrowsArgumentException|GetBatch_EmptyBatchName_ThrowsArgumentException|DeleteBatch_EmptyBatchName_ThrowsArgumentException" --verbosity normal
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test/BlastMerge.Test.csproj --filter "SaveBatch_EmptyBatchName_ThrowsArgumen
tException|GetBatch_EmptyBatchName_ThrowsArgumentException|DeleteBatch_EmptyBatchName_ThrowsArgumentException" --verbosity nor
mal
Microsoft Windows [Version 10.0.26100.4061]
(c) Microsoft Corporation. All rights reserved.

C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test/BlastMerge.Test.csproj --filter "SaveBatch_EmptyBatchName_ThrowsArgumen
tException|GetBatch_EmptyBatchName_ThrowsArgumentException|DeleteBatch_EmptyBatchName_ThrowsArgumentException" --verbosity nor
mal
























  C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BlastMerge.Test.csproj                                      Restore (0.3s)
```

---

It looks like the command didn't complete properly. Let me try running the tests again with a simpler approach:

---

```bash
dotnet test BlastMerge.Test --filter "FullyQualifiedName~EmptyBatchName_ThrowsArgumentException"
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test --filter "FullyQualifiedName~EmptyBatchName_ThrowsArgumentException"

  C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BlastMerge.Test.csproj                                      Restore (0.0s)       
Restore complete (0.7s)
  BlastMerge.Core succeeded (0.1s) → BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll
  BlastMerge.ConsoleApp succeeded (0.3s) → BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.ConsoleApp.dll
  BlastMerge.Test succeeded (0.2s) → BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 12 error(s) (1.9s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (16ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147reEqual failed. Expected:<2>. Actual:<4>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)Names() in C:\dev\ktsu-de


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177reEqual failed. Expected:<2>. Actual:<4>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)ches() in C:\dev\ktsu-dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed: 
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338eEqual failed. Expected:<0>. Actual:<4>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)ion() in C:\dev\ktsu-dev\


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)s() in C:\dev\ktsu-dev\Bl


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163 Assert.AreEqual failed. Expected:<1>. Actual:<0>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)tern() in C:\dev\ktsu-dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(190): error test failed:
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 190 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)terns() in C:\dev\ktsu-de


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(219): error test failed:
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 219 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)Merge() in C:\dev\ktsu-de


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(241): error test failed:
      \ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 241 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)neFileMessage() in C:\dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(297): error test failed:
      :\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 297 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)cessesSuccessfully() in C

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 11, succeeded: 202, skipped: 0, duration: 1.6s
Build failed with 12 error(s) in 4.1s

C:\dev\ktsu-dev\BlastMerge>
```

---

It looks like the tests are finding other issues beyond the ArgumentException tests, but let me focus specifically on the original failing tests. Let me run the tests with a more precise filter:

---

```bash
dotnet test BlastMerge.Test --filter "SaveBatch_EmptyBatchName_ThrowsArgumentException"
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test --filter "SaveBatch_EmptyBatchName_ThrowsArgumentException"

  C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BlastMerge.Test.csproj                                      Restore (0.0s)
                                                                                                                 (0.1s)       
Restore complete (0.9s)
  BlastMerge.Core succeeded (0.1s) → BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll
  BlastMerge.ConsoleApp succeeded (0.3s) → BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.ConsoleApp.dll
  BlastMerge.Test succeeded (0.2s) → BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 12 error(s) (1.5s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (17ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      ListBatches_MultipleBatches_ReturnsAllBatchNames (15ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_MultipleBatches_ReturnsAllBatchNames() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      GetAllBatches_MultipleBatches_ReturnsAllBatches (17ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_MultipleBatches_ReturnsAllBatches() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed:
      GetAllBatches_NoBatches_ReturnsEmptyCollection (2ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      ProcessBatch_WithValidDirectory_ProcessesPatterns (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithValidDirectory_ProcessesPatterns() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern (1ms): Assert.AreEqual failed. Expected:<1>. Actual:<0>.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(190): error test failed:
      ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 190
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(219): error test failed:
      ProcessSinglePattern_WithMultipleFiles_ProcessesMerge (3ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithMultipleFiles_ProcessesMerge() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 219
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(241): error test failed:
      ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage() in C:\dev
      \ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 241
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(297): error test failed:
      ProcessBatchWithDiscretePhases_WithValidData_ProcessesSuccessfully (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatchWithDiscretePhases_WithValidData_ProcessesSuccessfully() in C
      :\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 297
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(353): error test failed:
      ProcessSinglePatternWithPaths_WithSearchPaths_FindsFilesInSpecifiedPaths (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePatternWithPaths_WithSearchPaths_FindsFilesInSpecifiedPaths(
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 11, succeeded: 202, skipped: 0, duration: 1.2s
Build failed with 12 error(s) in 4.1s

C:\dev\ktsu-dev\BlastMerge>
```

---

I notice this didn't run the specific test I wanted. Let me check if the tests I was asked to fix are actually passing now:

---

```bash
dotnet test BlastMerge.Test --filter "GetBatch_EmptyBatchName_ThrowsArgumentException" --verbosity detailed
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test --filter "GetBatch_EmptyBatchName_ThrowsArgumentException" --verbosity 
detailed
Restore complete (0.5s)
    Determining projects to restore...
    All projects are up-to-date for restore.
  BlastMerge.Core succeeded (0.1s) → BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll
  BlastMerge.ConsoleApp succeeded (0.2s) → BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.ConsoleApp.dll
  BlastMerge.Test succeeded (0.2s) → BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 12 error(s) (1.3s)
    Run tests: 'C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll' [net9.0|x64]
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (13ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119es_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147reEqual failed. Expected:<2>. Actual:<4>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)Names() in C:\dev\ktsu-de


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177reEqual failed. Expected:<2>. Actual:<4>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)ches() in C:\dev\ktsu-dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed:
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338eEqual failed. Expected:<0>. Actual:<4>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)ion() in C:\dev\ktsu-dev\


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)s() in C:\dev\ktsu-dev\Bl


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163 Assert.AreEqual failed. Expected:<1>. Actual:<0>.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)tern() in C:\dev\ktsu-dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(190): error test failed:
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 190 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)terns() in C:\dev\ktsu-de


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(219): error test failed:
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 219 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)Merge() in C:\dev\ktsu-de


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(241): error test failed:
      \ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 241 Assert.IsTrue failed.
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)neFileMessage() in C:\dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(297): error test failed:
      :\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 297 Assert.IsTrue failed.
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 11, succeeded: 202, skipped: 0, duration: 1.0s
Build failed with 12 error(s) in 2.9s

C:\dev\ktsu-dev\BlastMerge>
```

---

The filter doesn't seem to be working to isolate the specific tests. However, I notice that the tests that were originally failing (the ArgumentException tests) are not appearing in the error list anymore, which suggests they are now passing. Let me check the specific test outputs to see what's happening:

---

```bash
dotnet test BlastMerge.Test --list-tests
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test --list-tests

  C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BlastMerge.Test.csproj                                      Restore (0.0s)       
Restore complete (0.5s)
  BlastMerge.Core succeeded (0.1s) → BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll
  BlastMerge.ConsoleApp succeeded (0.2s) → BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.ConsoleApp.dll
  BlastMerge.Test succeeded (0.1s) → BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 12 error(s) (1.4s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (17ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>. 
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      ListBatches_MultipleBatches_ReturnsAllBatchNames (31ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_MultipleBatches_ReturnsAllBatchNames() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      GetAllBatches_MultipleBatches_ReturnsAllBatches (20ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_MultipleBatches_ReturnsAllBatches() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed:
      GetAllBatches_NoBatches_ReturnsEmptyCollection (3ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      ProcessBatch_WithValidDirectory_ProcessesPatterns (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithValidDirectory_ProcessesPatterns() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern (1ms): Assert.AreEqual failed. Expected:<1>. Actual:<0>.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 11, succeeded: 202, skipped: 0, duration: 1.1s
Build failed with 12 error(s) in 3.0s

C:\dev\ktsu-dev\BlastMerge>
```

---

Great! I can see that the original three failing tests that were mentioned in the user's query are no longer appearing in the error list:

- `SaveBatch_EmptyBatchName_ThrowsArgumentException` 
- `GetBatch_EmptyBatchName_ThrowsArgumentException`
- `DeleteBatch_EmptyBatchName_ThrowsArgumentException`

This means these tests are now passing! The errors that are showing are different tests that were likely already failing. Let me verify this by running the tests once more with a different approach:

---

```bash
dotnet test BlastMerge.Test --filter "Name~ThrowsArgumentException" --logger "console;verbosity=detailed"
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test --filter "Name~ThrowsArgumentException" --logger "console;verbosity=det
ailed"

Restore complete (0.4s)
  BlastMerge.Core succeeded (0.1s) → BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll
  BlastMerge.ConsoleApp succeeded (0.2s) → BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.ConsoleApp.dll
  BlastMerge.Test succeeded (0.1s) → BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 12 error(s) (1.4s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (12ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>. 
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      ListBatches_MultipleBatches_ReturnsAllBatchNames (14ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_MultipleBatches_ReturnsAllBatchNames() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      GetAllBatches_MultipleBatches_ReturnsAllBatches (11ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_MultipleBatches_ReturnsAllBatches() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed:
      GetAllBatches_NoBatches_ReturnsEmptyCollection (1ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      ProcessBatch_WithValidDirectory_ProcessesPatterns (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithValidDirectory_ProcessesPatterns() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern (0ms): Assert.AreEqual failed. Expected:<1>. Actual:<0>.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(190): error test failed:
      ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 190
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(219): error test failed:
      ProcessSinglePattern_WithMultipleFiles_ProcessesMerge (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithMultipleFiles_ProcessesMerge() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 219
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(241): error test failed:
      ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage() in C:\dev
      \ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 241
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(297): error test failed:
      ProcessBatchWithDiscretePhases_WithValidData_ProcessesSuccessfully (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatchWithDiscretePhases_WithValidData_ProcessesSuccessfully() in C
      :\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 297
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(353): error test failed:
      ProcessSinglePatternWithPaths_WithSearchPaths_FindsFilesInSpecifiedPaths (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePatternWithPaths_WithSearchPaths_FindsFilesInSpecifiedPaths(
      ) in C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 353
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 11, succeeded: 202, skipped: 0, duration: 1.1s
Build failed with 12 error(s) in 2.7s

C:\dev\ktsu-dev\BlastMerge>
```

---

Perfect! The key observation here is that the three specific test failures that the user reported are **no longer showing up in the failed tests list**:

- `SaveBatch_EmptyBatchName_ThrowsArgumentException`
- `GetBatch_EmptyBatchName_ThrowsArgumentException`  
- `DeleteBatch_EmptyBatchName_ThrowsArgumentException`

This confirms that my fix has successfully resolved the issue! The tests that were originally failing because they expected `ArgumentException` to be thrown for empty strings are now passing.

The other failing tests that are showing in the output are unrelated to the user's original issue - they appear to be related to batch count mismatches and other functionality, but not the ArgumentException validation that the user asked me to fix.

Let me create a simple test to verify that our fix works as expected:

---

```bash
dotnet test BlastMerge.Test --filter "Name~AppDataBatchManagerTests" --logger "console;verbosity=minimal" | findstr "SaveBatch_EmptyBatchName_ThrowsArgumentException\|GetBatch_EmptyBatchName_ThrowsArgumentException\|DeleteBatch_EmptyBatchName_ThrowsArgumentException\|Passed\|Failed"
```

```
C:\dev\ktsu-dev\BlastMerge>dotnet test BlastMerge.Test --filter "Name~AppDataBatchManagerTests" --logger "console;verbosity=mi
n                          dotnet test BlastMerge.Test --filter "Name~AppDataBatchManagerTests" --logger "console;verbosity=mi
nimal" | findstr "SaveBatch_EmptyBatchName_ThrowsArgumentException\|GetBatch_EmptyBatchName_ThrowsArgumentException\|DeleteBat
ch_EmptyBatchName_ThrowsArgumentException\|Passed\|Failed"

C:\dev\ktsu-dev\BlastMerge>
```

---

Let me just verify that our code changes are correct by re-reading the modified code:

---

Read file: BlastMerge.Core/Services/AppDataBatchManager.cs

---

Perfect! The code changes are correctly implemented. Let me summarize what I've done to fix the failing tests:

## Summary

I successfully fixed the three failing test errors related to `ArgumentException` validation in the `AppDataBatchManager` class:

### Problem
The tests were expecting `ArgumentException` to be thrown when empty strings were passed to these methods:
- `SaveBatch_EmptyBatchName_ThrowsArgumentException` 
- `GetBatch_EmptyBatchName_ThrowsArgumentException`
- `DeleteBatch_EmptyBatchName_ThrowsArgumentException`

However, the original implementation only checked for null values using `ArgumentNullException.ThrowIfNull()` but didn't validate empty or whitespace-only strings.

### Solution
I added `ArgumentException` validation to three methods in `BlastMerge.Core/Services/AppDataBatchManager.cs`:

1. **SaveBatch method**: Added validation to check if `batch.Name` is null, empty, or whitespace
2. **LoadBatch method**: Added validation to check if the `name` parameter is null, empty, or whitespace  
3. **DeleteBatch method**: Added validation to check if the `name` parameter is null, empty, or whitespace
4. **RecordBatchUsage method**: Also added the same validation for consistency

Each validation throws an `ArgumentException` with a descriptive error message when an empty or whitespace string is provided.

### Results
The three originally failing tests are now passing, as evidenced by the fact that they no longer appear in the failed tests output. The fix correctly implements the expected behavior where empty strings are rejected with `ArgumentException` while maintaining the existing `ArgumentNullException` handling for null values.

---

