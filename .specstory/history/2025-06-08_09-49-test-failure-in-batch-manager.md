<!-- Generated by SpecStory -->

# Test failure in batch manager (2025-06-08 19:49:41)

_**User**_

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (13ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\d
      ev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isCo
      nstructor)
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)

---

_**Assistant**_



---

I can see there's a test failure where the test expects 0 batches but gets 4. Let me examine the test file to understand what's happening and identify the issue.

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Let me look at the setup and cleanup methods to understand how the test environment is being configured:

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Now let me check what the `BlastMergeAppData.ResetForTesting()` method does and examine the `AppDataBatchManager` implementation to understand why 4 batches are being returned:

---

<details>
            <summary>Searched codebase "BlastMergeAppData ResetForTesting" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.Test/MockFileSystemTestBase.cs` | L1-67 |
| `BlastMerge.Test/TestHelper.cs` | L51-120 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L55-136 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Models/ApplicationSettings.cs` | L1-27 |
| `BlastMerge.Test/PerformanceTests.cs` | L1-62 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L1-55 |
| `BlastMerge.ConsoleApp/BlastMerge.ConsoleApp.csproj` | L1-12 |
| `BlastMerge.Core/BlastMerge.Core.csproj` | L1-9 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Test/DiffPlexHelperTests.cs` | L1-85 |
| `BlastMerge.Test/MockFileSystemTests.cs` | L1-60 |
| `BlastMerge.Test/BlastMerge.Test.csproj` | L1-14 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L195-265 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L265-322 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L71-130 |
| `BlastMerge.Test/TestHelper.cs` | L1-51 |

</details>

---

Now let me examine the `AppDataBatchManager` implementation to see how `ListBatches()` works:

---

Read file: BlastMerge.Core/Services/AppDataBatchManager.cs

---

Now let me check the `BatchConfiguration.CreateDefault()` method to see if there's a possibility that default batches are being created:

---

<details>
            <summary>Searched codebase "BatchConfiguration CreateDefault" • **21** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L51-120 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L1-51 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L132-202 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L1-71 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L1-67 |
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L202-271 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L120-132 |
| `BlastMerge.ConsoleApp/CLI/CommandLineOptions.cs` | L1-56 |
| `BlastMerge.Core/Services/BatchProcessor.cs` | L712-756 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L883-944 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L823-883 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L386-441 |
| `BlastMerge.ConsoleApp/Text/BatchOperationsDisplay.cs` | L1-22 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Models/BatchOperationChoice.cs` | L1-27 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L333-386 |

</details>

---

Now I need to understand what could be causing the 4 batches to appear. Let me check if there are any calls to `CreateDefaultBatchIfNoneExist` that might be happening during the test execution, or if there's some other initialization that's creating default batches:

---

<details>
            <summary>Searched codebase "CreateDefaultBatchIfNoneExist BlastMergeAppData.Get" • **22** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L51-120 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Core/Services/BatchProcessor.cs` | L143-189 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/CLI/CommandLineOptions.cs` | L1-56 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L120-132 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L1-51 |
| `BlastMerge.Core/Services/BatchProcessor.cs` | L712-756 |
| `BlastMerge.Test/BatchProcessorTests.cs` | L1-71 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.Core/Services/BatchProcessor.cs` | L49-101 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L465-538 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L883-944 |
| `BlastMerge.Core/Models/BatchRequest.cs` | L1-22 |

</details>

---

Let me search for any other places where app data might be initialized automatically with batches:

---

<details>
            <summary>Grep search for "CreateDefault|CreateRepositorySyncBatch" • **7** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/AppDataBatchManager.cs` | L142 | `public static bool CreateDefaultBatchIfNoneExist()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Services/AppDataBatchManager.cs` | L146 | `BatchConfiguration defaultBatch = BatchConfiguration.CreateDefault();` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchConfiguration.cs` | L70 | `public static BatchConfiguration CreateDefault()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchConfiguration.cs` | L96 | `public static BatchConfiguration CreateRepositorySyncBatch()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-05_06-36-searching-multiple-files-with-globs.md` | L465 | `+ 	public static BatchConfiguration CreateDefault()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-05_06-57-improve-class-coupling-and-complexity.md` | L421 | `- Add a `CreateDefault()` method to the `BatchConfiguration` class that returns a default batch configuration for common repository files (e.g., `.gitignore`, `.gitattributes`, `.editorconfig`, `*.yml`, `*.yam` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-05_06-57-improve-class-coupling-and-complexity.md` | L963 | `+ 		var config = BatchConfiguration.CreateDefault();` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-08_08-41-test-failure-in-batch-processor.md` | L114 | `Looking at other parts of the codebase, I can see that `SkipEmptyPatterns = true` seems to be the desired default behavior (as seen in `CreateDefault()` and `CreateRepositorySyncBatch()` methods). The test appears to be incorrect.` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-07_08-33-fix-icon-alignment-in-main-menu.md` | L1657 | `+ 	public static bool CreateDefaultBatchIfNoneExist()` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-07_08-33-fix-icon-alignment-in-main-menu.md` | L1661 | `+ 			BatchConfiguration defaultBatch = BatchConfiguration.CreateDefault();` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-07_00-30-continue-last-modifications.md` | L199 | `⟪ 105 characters skipped ⟫ation defaultBatch = BatchConfiguration.CreateDefault();` |` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-07_00-30-continue-last-modifications.md` | L201 | `| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchConfiguration.cs` | L69 | `public static BatchConfiguration CreateDefault()` |` |
| `file:///c%3A/dev/ktsu-dev/BlastMerge/.specstory/history/2025-06-07_00-30-continue-last-modifications.md` | L203 | `| `file:///c%3A/dev/ktsu-dev/BlastMerge/BlastMerge.Core/Models/BatchConfiguration.cs` | L95 | `public static BatchConfiguration CreateRepositorySyncBatch()` |` |

</details>

---

Now let me check if there are any existing saved app data files in the user's real app data directory that might be getting loaded. Let me look at what happens when `BlastMergeAppData.Get()` is called:

---

<details>
            <summary>Searched codebase "AppData Get() singleton instance load" • **23** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L1-55 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L55-136 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/BlastMerge.ConsoleApp.csproj` | L1-12 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L136-176 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.Core/Models/ApplicationSettings.cs` | L1-27 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L741-789 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L1-43 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L65-140 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.ConsoleApp/Program.cs` | L1-49 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L768-823 |
| `scripts/PSBuild.psm1` | L135-194 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L140-199 |

</details>

---

Let me check if there's an actual app data file being loaded from the user's LOCALAPPDATA directory. The issue seems to be that there might be an existing app data file that contains 4 batches. Let me check the test in more detail and run the test to debug this:

---

```bash
cd BlastMerge.Test && dotnet test --filter "ListBatches_NoBatches_ReturnsEmptyCollection" --verbosity normal
```

```
C:\dev\ktsu-dev\BlastMerge>cd BlastMerge.Test && dotnet test --filter "ListBatches_NoBatches_ReturnsEmptyCollection" --verbosi
ty normal
Restore complete (0.6s)
  BlastMerge.Core succeeded (0.1s) → C:\dev\ktsu-dev\BlastMerge\BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll     
  BlastMerge.ConsoleApp succeeded (0.2s) → C:\dev\ktsu-dev\BlastMerge\BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.C
onsoleApp.dll
  BlastMerge.Test succeeded (0.2s) → bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 15 error(s) (1.6s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (17ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>. 
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      ListBatches_MultipleBatches_ReturnsAllBatchNames (17ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_MultipleBatches_ReturnsAllBatchNames() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      GetAllBatches_MultipleBatches_ReturnsAllBatches (18ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_MultipleBatches_ReturnsAllBatches() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      SaveBatch_EmptyBatchName_ThrowsArgumentException (2ms): Test method did not throw expected exception System.ArgumentExce
      ption.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      GetBatch_EmptyBatchName_ThrowsArgumentException (2ms): Test method did not throw expected exception System.ArgumentExcep
      tion.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      DeleteBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception System.ArgumentEx
      ception.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed:
      GetAllBatches_NoBatches_ReturnsEmptyCollection (2ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      ProcessBatch_WithValidDirectory_ProcessesPatterns (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithValidDirectory_ProcessesPatterns() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern (0ms): Assert.AreEqual failed. Expected:<1>. Actual:<0>.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(190): error test failed:
      ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 190
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(219): error test failed:
      ProcessSinglePattern_WithMultipleFiles_ProcessesMerge (2ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithMultipleFiles_ProcessesMerge() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 219
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(241): error test failed:
      ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage() in C:\dev


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 14, succeeded: 199, skipped: 0, duration: 1.3s
Build failed with 15 error(s) in 3.4s

C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test>
```

---



---

I'll help you investigate and fix the test failure in `BlastMerge.Test\AppDataBatchManagerTests.cs`. Let me start by examining the failing test and related code to understand the root cause.

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Let me look at the rest of the test file, particularly the failing test at line 119:

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

I found the failing test! Let me examine the `AppDataBatchManager` and related classes to understand how they work:

---

<details>
            <summary>Searched codebase "AppDataBatchManager class implementation" • **24** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L768-823 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L386-441 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L1068-1133 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L177-219 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L823-883 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L202-271 |
| `.cursor/rules/derived-cursor-rules.mdc` | L265-279 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L441-500 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L272-324 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L132-202 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L51-91 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L883-944 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L944-1012 |

</details>

---

Now let me look at the AppData base class and the BatchConfiguration class to understand how the data persistence works:

---

<details>
            <summary>Searched codebase "AppData class inheritance and BatchConfiguration CreateDefault" • **24** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L51-120 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L768-823 |
| `BlastMerge.Core/Models/BatchConfiguration.cs` | L1-51 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L823-883 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L386-441 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L202-271 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L91-103 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L132-202 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L177-219 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L333-386 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L883-944 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L741-789 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L51-91 |

</details>

---

Perfect! I found the issue. Now let me look at how the AppData system works to understand when the data gets loaded:

---

<details>
            <summary>Searched codebase "AppData Get method and singleton initialization" • **24** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L1-55 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L55-136 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.ConsoleApp/BlastMerge.ConsoleApp.csproj` | L1-12 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L136-176 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Program.cs` | L1-49 |
| `BlastMerge.Core/Models/ApplicationSettings.cs` | L1-27 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L1-43 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L1-51 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L741-789 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BaseMenuHandler.cs` | L1-61 |
| `BlastMerge.ConsoleApp/CLI/CommandLineHandler.cs` | L1-67 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/SettingsMenuHandler.cs` | L65-140 |
| `scripts/PSBuild.psm1` | L135-194 |

</details>

---

Now I understand the issue! The problem is that the `AppData.Get()` method automatically loads the data from disk when the singleton is first accessed, and this happens after setting the test environment variable but before clearing any existing data.

Let me run the test to see the exact error and get a better understanding:

---

```bash
cd "BlastMerge.Test" && dotnet test --filter "ListBatches_NoBatches_ReturnsEmptyCollection" --verbosity normal
```

```
C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test>cd "BlastMerge.Test" && dotnet test --filter "ListBatches_NoBatches_ReturnsEmptyCol
lection" --verbosity normal
The system cannot find the path specified.

C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test>
```

---

```bash
dotnet test --filter "ListBatches_NoBatches_ReturnsEmptyCollection" --verbosity normal
```

```
C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test>dotnet test --filter "ListBatches_NoBatches_ReturnsEmptyCollection" --verbosity nor
mal
Restore complete (0.5s)
  BlastMerge.Core succeeded (0.1s) → C:\dev\ktsu-dev\BlastMerge\BlastMerge.Core\bin\Debug\net9.0\ktsu.BlastMerge.Core.dll     
  BlastMerge.ConsoleApp succeeded (0.2s) → C:\dev\ktsu-dev\BlastMerge\BlastMerge.ConsoleApp\bin\Debug\net9.0\ktsu.BlastMerge.C
onsoleApp.dll
  BlastMerge.Test succeeded (1.3s) → bin\Debug\net9.0\ktsu.BlastMerge.Test.dll
  BlastMerge.Test test failed with 15 error(s) (1.5s)
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(119): error test failed:
      ListBatches_NoBatches_ReturnsEmptyCollection (15ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 119
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)

      
    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(147): error test failed:
      ListBatches_MultipleBatches_ReturnsAllBatchNames (16ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.ListBatches_MultipleBatches_ReturnsAllBatchNames() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 147
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(177): error test failed:
      GetAllBatches_MultipleBatches_ReturnsAllBatches (15ms): Assert.AreEqual failed. Expected:<2>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_MultipleBatches_ReturnsAllBatches() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 177
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      SaveBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception System.ArgumentExce
      ption.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      GetBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception System.ArgumentExcep
      tion.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error test failed:
      DeleteBatch_EmptyBatchName_ThrowsArgumentException (1ms): Test method did not throw expected exception System.ArgumentEx
      ception.

    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs(338): error test failed:
      GetAllBatches_NoBatches_ReturnsEmptyCollection (1ms): Assert.AreEqual failed. Expected:<0>. Actual:<4>.
      Stack Trace:
         at ktsu.BlastMerge.Test.AppDataBatchManagerTests.GetAllBatches_NoBatches_ReturnsEmptyCollection() in C:\dev\ktsu-dev\
      BlastMerge\BlastMerge.Test\AppDataBatchManagerTests.cs:line 338
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(132): error test failed:
      ProcessBatch_WithValidDirectory_ProcessesPatterns (1ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithValidDirectory_ProcessesPatterns() in C:\dev\ktsu-dev\Bl
      astMerge\BlastMerge.Test\BatchProcessorTests.cs:line 132
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(163): error test failed:
      ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern (0ms): Assert.AreEqual failed. Expected:<1>. Actual:<0>.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithNoMatchingFiles_HandlesEmptyPattern() in C:\dev\ktsu-dev
      \BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 163
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(190): error test failed:
      ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessBatch_WithSkipEmptyPatterns_SkipsEmptyPatterns() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 190
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(219): error test failed:
      ProcessSinglePattern_WithMultipleFiles_ProcessesMerge (2ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithMultipleFiles_ProcessesMerge() in C:\dev\ktsu-de
      v\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 219
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    
         at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs(241): error test failed:
      ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage (0ms): Assert.IsTrue failed.
      Stack Trace:
         at ktsu.BlastMerge.Test.BatchProcessorTests.ProcessSinglePattern_WithSingleFile_ReturnsOnlyOneFileMessage() in C:\dev
      \ktsu-dev\BlastMerge\BlastMerge.Test\BatchProcessorTests.cs:line 241
         at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)    


    C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\ktsu.BlastMerge.Test.dll : error run failed: Tests failed: 'C:
\dev\ktsu-dev\BlastMerge\BlastMerge.Test\bin\Debug\net9.0\TestResults\ktsu.BlastMerge.Test_net9.0_x64.log' [net9.0|x64]       

Test summary: total: 213, failed: 14, succeeded: 199, skipped: 0, duration: 1.2s
Build failed with 15 error(s) in 4.2s

C:\dev\ktsu-dev\BlastMerge\BlastMerge.Test>
```

---

Perfect! I can see the issue clearly. The test is expecting 0 batches but getting 4. This means there are 4 persistent batches being loaded from somewhere. Let me see if I can identify what batches are being loaded by running a quick debugging check:

---

<details>
            <summary>Searched codebase "AppData singleton loading and initialization order" • **24** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.ConsoleApp/BlastMerge.ConsoleApp.csproj` | L1-12 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L1-55 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L55-136 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Program.cs` | L1-49 |
| `BlastMerge.Core/Models/ApplicationSettings.cs` | L1-27 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L1-43 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L136-176 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L741-789 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L1-51 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L272-324 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L768-823 |
| `BlastMerge.Core/BlastMerge.Core.csproj` | L1-9 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BatchOperationsMenuHandler.cs` | L944-1012 |

</details>

---



---

I can see from the conversation summary that you're dealing with a test isolation issue where `AppDataBatchManager.ListBatches()` is returning 4 batches instead of 0, despite attempts to reset the singleton and use a temporary directory for testing.

Let me investigate the current state of the test and the related code to understand why the isolation isn't working properly.

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Now let me examine the test setup and cleanup methods to understand how the test isolation is supposed to work:

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Now let me examine the `GetAllBatches_NoBatches_ReturnsEmptyCollection` test to see if it has the same issue:

---

Read file: BlastMerge.Test/AppDataBatchManagerTests.cs

---

Now let me examine the `AppDataBatchManager` and `BlastMergeAppData` classes to understand how the data is being loaded:

---

<details>
            <summary>Searched codebase "AppDataBatchManager" • **2** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |

</details>

---

Read file: BlastMerge.Core/Services/AppDataBatchManager.cs

---

Read file: BlastMerge.Core/Services/AppDataBatchManager.cs

---

Now let me find the `BlastMergeAppData` class to understand the singleton pattern and the reset mechanism:

---

<details>
            <summary>Searched codebase "BlastMergeAppData" • **10** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: BlastMerge.Core/Models/BlastMergeAppData.cs

---

Now let me check the base `AppData` class to understand how it initializes and loads data:

---

<details>
            <summary>Searched codebase "AppData<T> _instance Get Load" • **22** results</summary>
        
| File | Lines |
|------|-------|
| `BlastMerge.Core/Models/BlastMergeAppData.cs` | L1-56 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L1-78 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L1-72 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L78-152 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L1-55 |
| `BlastMerge.Core/Services/AppDataBatchManager.cs` | L152-203 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L72-150 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L306-341 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L228-306 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L55-136 |
| `BlastMerge.Test/AppDataBatchManagerTests.cs` | L150-228 |
| `BlastMerge.ConsoleApp/BlastMerge.ConsoleApp.csproj` | L1-12 |
| `BlastMerge.Core/Services/ApplicationService.cs` | L1-51 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L123-177 |
| `BlastMerge.ConsoleApp/Services/MenuHandlers/BaseMenuHandler.cs` | L1-61 |
| `BlastMerge.ConsoleApp/Services/AsyncApplicationService.cs` | L1-43 |
| `BlastMerge.ConsoleApp/Models/AppDataHistoryInput.cs` | L136-176 |
| `BlastMerge.ConsoleApp/Services/Common/NavigationStack.cs` | L1-45 |
| `BlastMerge.Core/Models/ApplicationSettings.cs` | L1-27 |
| `BlastMerge.ConsoleApp/Program.cs` | L1-49 |
| `BlastMerge.ConsoleApp/Services/ConsoleApplicationService.cs` | L417-465 |
| `BlastMerge.ConsoleApp/CLI/CommandLineHandler.cs` | L1-67 |

</details>

---





---

